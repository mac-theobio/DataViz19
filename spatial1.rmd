---
title: "get maps"
author: "Alex Bushby, Aleks Jovic, Ben Bolker"
---

```{r opts,include=FALSE}
```

```{r pkgs,message=FALSE}
library(ggplot2)
library(tidyverse)
library(labeling)
library(ggmap)
```

## ggmap package

ggmap

- get raster map tiles from online sources 
- e.g. digital aerial photographs, satellite imagery, digital pictures, or even scanned maps
- plotting via `ggplot` extensions
- also has functions for geolocation and routing.

## getting maps

- first retrieve an underlying *map layer* (raster)
- various functions to get maps from popular sources: 
    - Google Maps
	- [OpenStreetMap](https://www.openstreetmap.org/#map=17/43.26435/-79.91770)
	- [Stamen Maps](http://maps.stamen.com/#watercolor/12/37.7706/-122.3782)

## StamenMap

```{r sm1, cache=TRUE,message=FALSE}
## specify lat/long bounding box
mapzone <- c(left = -135, bottom = 25.75, right = -62, top = 75)
s_map <- get_stamenmap(mapzone, zoom = 5, maptype = "toner-lite")
## maptype: "terrain", "terrain-background", "terrain-labels", "terrain-lines",
##  "toner" + etc., "watercolor", ...
```

## Plot

```{r sm2}
ggmap(s_map)
```

##  Google maps

Need to sign up for an API key and enable Static Maps: go [here](https://cloud.google.com/maps-platform/) and follow *all* the instructions (get an API key, enable maps services, give them credit card info

```{r gmap,message=FALSE,cache=TRUE}
register_google(key=Sys.getenv("GOOGLEMAPS_KEY"))
g_map <- get_googlemap(center=c(lon=-79.91, lat=43.26),
                       zoom=13, size=c(640,640),
                       scale=2,maptype='terrain')
## maptype: 'satellite','roadmap','hybrid'
```
